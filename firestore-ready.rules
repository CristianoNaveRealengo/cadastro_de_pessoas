rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    
    // ==============================================
    // REGRAS CONFIGURADAS PARA CRISTIANO NAVE REALENGO
    // ==============================================
    // Email: cristianonaverealengo@gmail.com
    // UID: wV5SD29tCMRZq8by3Pwe4m75l3w1
    
    // Função para verificar se é o usuário autorizado
    function isAuthorizedUser() {
      return request.auth != null &&
             request.auth.uid == "wV5SD29tCMRZq8by3Pwe4m75l3w1";
    }
    
    // ==============================================
    // REGRAS PARA A COLEÇÃO 'records'
    // ==============================================
    
    match /records/{document} {
      // Permitir todas as operações para o usuário autorizado
      allow read, write: if isAuthorizedUser();
    }
    
    // ==============================================
    // REGRAS PARA OUTRAS COLEÇÕES
    // ==============================================
    
    // Configurações do sistema
    match /settings/{document} {
      allow read, write: if isAuthorizedUser();
    }
    
    // Logs do sistema
    match /logs/{document} {
      allow read: if isAuthorizedUser();
      allow write: if false; // Sistema gera logs automaticamente
    }
    
    // Regra padrão: negar acesso a qualquer outra coleção
    match /{document=**} {
      allow read, write: if false;
    }
  }
}

// ==============================================
// INSTRUÇÕES PARA APLICAR:
// ==============================================
// 
// 1. Copie todo o conteúdo deste arquivo
// 2. Vá para https://console.firebase.google.com
// 3. Selecione seu projeto: appcadastrodepessoas-2c20b
// 4. Vá em Firestore Database > Rules
// 5. Cole o conteúdo e clique em "Publish"
// 
// ✅ Pronto! O sistema estará configurado para funcionar
//    apenas com o usuário cristianonaverealengo@gmail.com